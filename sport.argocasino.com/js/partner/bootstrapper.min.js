!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Bootstrapper=e():t.Bootstrapper=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";i.r(e),i.d(e,"Headers",(function(){return p})),i.d(e,"Request",(function(){return E})),i.d(e,"Response",(function(){return S})),i.d(e,"DOMException",(function(){return C})),i.d(e,"fetch",(function(){return L}));var n="URLSearchParams"in self,r="Symbol"in self&&"iterator"in Symbol,o="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in self,a="ArrayBuffer"in self;if(a)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(t){return t&&l.indexOf(Object.prototype.toString.call(t))>-1};function c(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function d(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function m(t){return new Promise((function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}}))}function g(t){var e=new FileReader,i=m(e);return e.readAsArrayBuffer(t),i}function b(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:o&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&o&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=b(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||h(t))?this._bodyArrayBuffer=b(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,i,n=f(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,i=m(e),e.readAsText(t),i;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),i=new Array(e.length),n=0;n<e.length;n++)i[n]=String.fromCharCode(e[n]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(t,e){t=c(t),e=d(e);var i=this.map[t];this.map[t]=i?i+", "+e:e},p.prototype.delete=function(t){delete this.map[c(t)]},p.prototype.get=function(t){return t=c(t),this.has(t)?this.map[t]:null},p.prototype.has=function(t){return this.map.hasOwnProperty(c(t))},p.prototype.set=function(t,e){this.map[c(t)]=d(e)},p.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},p.prototype.keys=function(){var t=[];return this.forEach((function(e,i){t.push(i)})),u(t)},p.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),u(t)},p.prototype.entries=function(){var t=[];return this.forEach((function(e,i){t.push([i,e])})),u(t)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(t,e){var i,n,r=(e=e||{}).body;if(t instanceof E){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(i=e.method||this.method||"GET",n=i.toUpperCase(),w.indexOf(n)>-1?n:i),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function v(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var i=t.split("="),n=i.shift().replace(/\+/g," "),r=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(r))}})),e}function S(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},y.call(E.prototype),y.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},S.error=function(){var t=new S(null,{status:0,statusText:""});return t.type="error",t};var T=[301,302,303,307,308];S.redirect=function(t,e){if(-1===T.indexOf(e))throw new RangeError("Invalid status code");return new S(null,{status:e,headers:{location:t}})};var C=self.DOMException;try{new C}catch(t){(C=function(t,e){this.message=t,this.name=e;var i=Error(t);this.stack=i.stack}).prototype=Object.create(Error.prototype),C.prototype.constructor=C}function L(t,e){return new Promise((function(i,n){var r=new E(t,e);if(r.signal&&r.signal.aborted)return n(new C("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new p,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var i=t.split(":"),n=i.shift().trim();if(n){var r=i.join(":").trim();e.append(n,r)}})),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var r="response"in s?s.response:s.responseText;i(new S(r,n))},s.onerror=function(){n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.onabort=function(){n(new C("Aborted","AbortError"))},s.open(r.method,r.url,!0),"include"===r.credentials?s.withCredentials=!0:"omit"===r.credentials&&(s.withCredentials=!1),"responseType"in s&&o&&(s.responseType="blob"),r.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),r.signal&&(r.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&r.signal.removeEventListener("abort",a)}),s.send(void 0===r._bodyInit?null:r._bodyInit)}))}L.polyfill=!0,self.fetch||(self.fetch=L,self.Headers=p,self.Request=E,self.Response=S)},function(t,e,i){"use strict";i.r(e);var n={};function r(t=""){return t.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}function o(t){return new URL(t)}function s(t){return t.includes("http")||t.includes("https")||/^\/\//.test(t)}function a(t){var e=document.createElement("div");return e.innerHTML=t,0===e.childNodes.length?"":e.childNodes[0].nodeValue}i.r(n),i.d(n,"kebabCase",(function(){return r})),i.d(n,"parseUrl",(function(){return o})),i.d(n,"isAbsolute",(function(){return s})),i.d(n,"htmlDecode",(function(){return a})),i.d(n,"assign",(function(){return l})),i.d(n,"forEach",(function(){return h})),i.d(n,"cloneElement",(function(){return c})),i.d(n,"noop",(function(){return d})),i.d(n,"deepVal",(function(){return u})),i.d(n,"deepValWithBind",(function(){return p})),i.d(n,"appendStyleSheetToHead",(function(){return f})),i.d(n,"appendScriptToBody",(function(){return m})),i.d(n,"appendStyleSheetTo",(function(){return g})),i.d(n,"createStyleSheet",(function(){return b})),i.d(n,"appendScriptTo",(function(){return y})),i.d(n,"createScript",(function(){return w})),i.d(n,"createElementLink",(function(){return E})),i.d(n,"createElementScript",(function(){return v})),i.d(n,"createElement",(function(){return S})),i.d(n,"merge",(function(){return T})),i.d(n,"documentCreateElement",(function(){return C})),i.d(n,"appendChildToHead",(function(){return L})),i.d(n,"appendDivToBodyWithId",(function(){return A})),i.d(n,"appendChildToBody",(function(){return x})),i.d(n,"appendChildTo",(function(){return B})),i.d(n,"appendChild",(function(){return I})),i.d(n,"selectAll",(function(){return P})),i.d(n,"select",(function(){return U}));const l=Object.assign;function h(t,e){Object.entries(t).forEach(([t,i])=>e(i,t))}function c(t){let e=t.tagName,i=document.createElement(e);return Array.from(t.attributes).forEach(t=>i.setAttribute(t.nodeName,t.nodeValue)),t.innerHTML&&(i.innerHTML=t.innerHTML),i}const d=()=>{},u=(t,e="")=>e.split(".").reduce((t,e)=>t?t[e]:t,t),p=(t,e="")=>e.split(".").reduce((t,e)=>{let i=t&&t[e];return i=i&&"function"==typeof i&&"object"==typeof t?i.bind(t):i,i},t);function f(t){return g("head",b(t))}function m(t){return y("body",t)}function g(t,e){return B(t,b(e))}function b(t){return E({href:t,rel:"stylesheet"})}function y(t,e){return B(t,w(e))}function w(t){return v({src:t})}function E(t){return S("link",t)}function v(t){return S("script",t)}function S(t,e){return T(C(t),e)}const T=Object.assign;function C(){return document.createElement.apply(document,arguments)}function L(t,e){return B("head",S(t,e))}function A(t){return B("body",S("div",{id:t}))}function x(t,e){return B("body",t instanceof HTMLElement?t:S(t,e))}function B(t,e){return I(U(t),e)}function I(t,e){return t.appendChild(e),e}function P(t){return document.querySelectorAll.apply(document,arguments)}function U(t){return document.querySelector.apply(document,arguments)}function M(t,e={method:"get"}){const n="fetch"in window,r=n&&window.fetch.toString().match(/native code/),o=n&&!r,{fetch:s}=o?i(0):{fetch:window.fetch};return s(t,e).catch(i=>s(t,Object.assign(e,{credentials:"include"})))}class O{constructor(t){this.name=null,this.postFix=t,this.consoleTimeLabel=null}timeEnd(){console.timeEnd(""+this.consoleTimeLabel)}time(){console.time(""+this.consoleTimeLabel)}initTimeLabel(t=this.name){this.name=t;const e=this.postFix;this.consoleTimeLabel=`${t} ${e}`}}var D={base:"cdn-sp.apidigi.com",get CdnUrl(){return location.protocol+"//"+this.base},get Mobile(){return location.protocol+`//${this.base}/mobile-sport`},get Banner(){return location.protocol+`//${this.base}/banner`},get LiveCenter(){return location.protocol+`//${this.base}/live-center`},get SimpleEast(){return location.protocol+`//${this.base}/simple-east`},get Betchecker(){return location.protocol+`//${this.base}/betchecker`},get Betgenerator(){return location.protocol+`//${this.base}/betgenerator`},get Desktop(){return location.protocol+`//${this.base}/desktop-sport`},get Terminal(){return`https://${this.base}/terminal`},get AsianView(){return`https://${this.base}/asian-view`},get LivePage(){return`https://${this.base}/live-page`},get LiveMonitor(){return`https://${this.base}/live-monitor`},get ESport(){return`https://${this.base}/e-sport`},get TopMatches(){return`https://${this.base}/top-matches`},get LuckyWheel(){return`https://${this.base}/lucky-wheel`},get TableSoccer(){return`https://${this.base}/table-soccer`},get MultiDisplay(){return`https://${this.base}/multi-display`}};class j extends O{constructor(){super("config extracting"),this.selfConfig={APP_URL_MAP:D},this.request=M,this.initProps()}reset(){this.initProps()}initProps(){this.bootConfig={},this.bootableConfig={},this.name=null,this.url=null,this.metadataUrl=null,this.metadata={},this.version=null,this.urlWithVersion=null,this.indexHTMLUrl=null,this.indexHTML=null,this.globalSettingsUrl=null,this.globalSettings={},this.headElements=[],this.bodyElements=[],this.links=[],this.scripts=[]}extract(t,e){return this.bootConfig=e,this.appConfig=t,this.init(t.server)}async init(t){return this.initUrl(),this.initName(),this.initServer(t),this.initTimeLabel(),this.time(),this.initGlobalSettingsUrl(),await this.initGlobalSettings(),this.initMetadataUrl(),await this.initMetadata(),this.initGlobalSettingsEnv(),this.initVersion(),this.initUrlWithVersion(),this.initIndexHTMLUrl(),await this.initIndexHTML(),await this.initDocument(),this.initElements(),this.fixElementsSourceUrl(),this.initConfig(),this.timeEnd(),this.bootableConfig||{}}initConfig(){let t=this.name,e=this.links,i=this.scripts,n=this.url,r=this.indexHTMLUrl,o=this.metadataUrl,s=this.urlWithVersion,a=this.headElements,l=this.bodyElements,h={name:t,links:e,scripts:i,indexHTML:this.indexHTML,globalSettings:this.globalSettings,html:{head:a,body:l},urls:{base:n,index:r,version:s,metadata:o}};this.bootableConfig=h}fixElementsSourceUrl(){let t=this.links,e=this.scripts,i=this.urlWithVersion;const n=t=>{let e=new URL(i),n=t.replace(location.origin,e.origin);return this.logIfDebug(n),n};e.filter(t=>t.src).forEach(t=>t.src=n(t.getAttribute("src"))),t.forEach(t=>t.href=n(t.getAttribute("href")))}logIfDebug(){this.bootConfig.debug&&console.log.apply(null,arguments)}initElements(){let t=this.bootConfig.debug,e=["LINK","SCRIPT","STYLE"],i=i=>e.includes(i.tagName)&&t||!i.dataset.disabled,n=this.filterElementsFromDocument("head",i),r=this.filterElementsFromDocument("body",i),o=Array.apply(null,n).concat(Array.apply(null,r)),s=o.filter(t=>t.tagName===e[0]),a=o.filter(t=>t.tagName===e[1]);this.assignToThis({headElements:n,bodyElements:r,links:s,scripts:a})}filterElementsFromDocument(t,e){let i=this.document.querySelector(t),n=Array.apply(null,i.children).filter(e);return n=n.map(c),n}async initDocument(){let t=this.indexHTML,e=(new DOMParser).parseFromString(t,"text/html");e.addEventListener("DOMContentLoaded",console.log),this.assignToThis({document:e})}async initGlobalSettings(){this.globalSettings={};let t=this.globalSettingsUrl;if(!t)return;let e=await M(t,{method:"post",credentials:"include"}).catch(t=>!1),i=e.json&&await e.json().catch(t=>null);this.globalSettings=i||{}}initGlobalSettingsUrl(){if(!this.server)return;let t=["language","defaultLanguage","l","lang"].map(t=>this.appConfig[t]).find(t=>t),e=t?"?l="+t:"",i=`${this.server}/Common/GetGlobalSettings${e}`;this.globalSettingsUrl=i}async initIndexHTML(){let t=this.indexHTMLUrl,e=this.indexHTMLUrlNoCache,i=await M(t).catch(t=>M(e)).catch(t=>!1),n=i&&await i.text().catch(t=>"")||"";this.assignToThis({indexHTML:n})}initIndexHTMLUrl(){let t=this.urlWithVersion+"/index.html",e=`${this.indexHTMLUrl}?${Date.now()}`;this.assignToThis({indexHTMLUrl:t,indexHTMLUrlNoCache:e})}initUrlWithVersion(){let t=this.url,e=this.version,i=e?`${t}/${e}`:t;this.assignToThis({urlWithVersion:i})}initVersion(){let t=this.metadata,e=this.globalSettingsEnv,i=this.bootConfig.version,n=t[e],r=t[i]||i||n||t.latest;this.assignToThis({version:r})}initGlobalSettingsEnv(){let t=this.globalSettings,e=t.Env||(t.partner&&t.partner||{}).Env;this.assignToThis({globalSettingsEnv:e})}async initMetadata(){let t,e=this.metadataUrl,i=this.metadataUrlNoCache,n=await M(e).catch(t=>M(i)).catch(t=>!1);t=n&&await n.json().catch(t=>({latest:""})),this.assignToThis({metadata:t})}initMetadataUrl(){let t=this.url,e=t+"/metadata.json",i=`${t}/metadata.json?${Date.now()}`;this.assignToThis({metadataUrl:e,metadataUrlNoCache:i})}initName(){let t=this.bootConfig.name;this.assignToThis({name:t})}initServer(t){this.server=t}initUrl(){let t=this.bootConfig.name,e=this.selfConfig.APP_URL_MAP[t];this.assignToThis({url:e})}assignToThis(t){l(this,t)}}j=new j;class _ extends O{constructor(){super("loading"),this.initProps()}reset(){this.initProps()}initProps(){this.loadingDone=!1,this.onLoadResolve=d,this.onLoadComplete=()=>{this.loadingDone=!0,this.timeEnd(),this.onLoadResolve(this)},this.bootableConfig=null,this.loadingIndicatorSVG=""}async load(t){return this.name=t.name,this.debug=t.debug,this.initTimeLabel(),this.time(),this.bootableConfig=t,this.loadingDone=!1,this.initLoadableElements(),new Promise((t,e)=>{this.onLoadResolve=t;try{this.loadElements()}catch(t){e(t)}})}loadElements(){this.loadLinks(),this.loadScriptsSync()}loadScriptsSync(t=this.bootableConfig.scripts){let e=t[0];this.loadScriptNext(e,t)}loadScriptNext(t,e=this.bootableConfig.scripts,i=0){if(!t)return this.onLoadComplete();t.onload=()=>{this.debug&&console.timeEnd("script "+i),this.loadScriptNext(e[++i],e,i)},this.addScriptToDocument(t),this.debug&&console.time("script "+i),this.callScriptOnloadManuallyIfIsNotLoadable(t)}callScriptOnloadManuallyIfIsNotLoadable(t){!this.loadableElements.includes(t)&&t.onload()}addScriptToDocument(t){if(!(t instanceof HTMLElement))return;B(this.bootableConfig.html.head.includes(t)?"head":"body",t)}loadLinks(){this.bootableConfig.links.forEach(t=>document.head.appendChild(t))}initLoadableElements(){let t=this.bootableConfig.scripts.filter(t=>t.src);this.loadableElements=t}}_=new _;class H{async start(t){return this.parent=t,this.afterLoadFunctions=[],this.appConfig=t.appConfig,this.bootConfig=t.bootConfig,this.iframe=t.iframe,this.init(),await this.callApplicationStartFunction(),this.afterLoadFunctions.forEach(Function.prototype.call),this}addEventListener(t,e){this.iframe?window.addEventListener("message",i=>{const n=i.data;n.type===t&&e(n)}):this.callAppStarterMethod(()=>this.appStarter.addEventListener(t,e))}removeEventListener(t,e){const i=this.iframe;i?i.removeEventListener(t,e):this.callAppStarterMethod(()=>this.appStarter.removeEventListener(t,e))}dispatchEvent(t,e){const i=this.iframe;if(i){const n=i.contentWindow;n&&n.postMessage({data:e,type:t},"*")}else this.callAppStarterMethod(()=>this.appStarter.dispatchEvent(t,e))}callAppStarterMethod(t){void 0===this.appStarterImplemented?this.afterLoadFunctions.push(t):this.appStarterImplemented?t():console.warn("%cAppStarter not implemented. For messaging system please implement `@sportdigi/spp-starter` in your application.","color: orange")}async callApplicationStartFunction(){let t=this.parent,e=this.appConfig,i=this.appStarter;if(this.appStarterImplemented){const i=Object.assign(e,{container:e.containerId});return this.appStarter.start(i,t)}return await i.start(e)}init(){this.initHostObject(),this.initAppStarter(),this.guessAppStarterIfNotFound()}initHostObject(){const t=this.iframe?this.iframe.contentWindow:window;this.hostObject=t}initAppStarter(){const t=this.hostObject,e=this.bootConfig.name,i=r(e),n=t.sportdigi;if(n){const t=n[i];if(t){if(t.addEventListener)return this.appStarterImplemented=!0,this.appStarter=t;this.appStarterImplemented=!1}}const o={start:u(t,e||"")||d};this.appStarter=o}guessAppStarterIfNotFound(){const t=this.appStarter.start,e=this.bootConfig.name,i=this.hostObject,n=this.bootConfig.appStarterName;if(t!==d||n)return;const o=r(e);this.appStarter.start=p(i,"AppStarter.start")||p(i,"AppStarter.init")||p(i,`DIGI.${e}.init`)||p(i,`DIGI.${e}.start`)||p(i,`sportdigi.apps.${o}.start`)||p(i,`sportdigi.apps.${o}.init`)||p(i,"sportdigi.apps."+o)||p(i,`sportdigi.${o}.start`)||p(i,`sportdigi.${o}.init`)||p(i,"sportdigi."+o)||function(){console.log("App starter function not found. Try to set parameter `appStarterName`")}}}H=new H;class ${static get version(){return"2.3.0"}static create(){return new $}static async configure(){return $.createInstanceAndCall("configure",arguments)}static async setup(){return $.createInstanceAndCall("setup",arguments)}static async boot(){return $.createInstanceAndCall("boot",arguments)}static async bootIframe(){return $.createInstanceAndCall("bootIframe",arguments)}static async createInstanceAndCall(t,e){const i=new $;return await i[t].apply(i,e),i}initHeaderElement(){const t=(this.iframeConfig||{}).headerElement||{},e=t.clientHeight||0;this.headerElement=t,this.headerHeight=e}reset(){this.initProps(),this.ConfigExtractor.reset(),this.Loader.reset()}constructor(t={}){this.init.apply(this,arguments)}initProps(){this.bootConfig=null,this.appConfig={},this.appBootableConfig={},this.iframe=null}async bootIframe(t,e,i={}){return this.reset(),await this.configure(t,e,i),this.initHeaderElement(),await this.createIframe(),await this.start(),this.startMessaging(),this}async createIframe(){const t={width:"100%",height:"1000px",frameborder:"0",allowfullscreen:"",allow:"autoplay",scrolling:"no"},e=this.appConfig,i=this.bootConfig,n=this.iframeConfig,r=this.ConfigExtractor,o=e.containerId,s=i.name,a=r.links,l=r.scripts,h=`\n            <!DOCTYPE html>\n            <html lang="en">\n                <head>\n                <title>${s}</title>\n                    ${a.map(t=>t.outerHTML).join("")}\n                </head>        \n                \n                <body>                    \n                    <div id="${o}"></div>                \n                    <div id="modals"></div>\n                    ${l.map(t=>t.outerHTML).join("")}\n                </body>\n            </html>\n        `;(["AsianView","Mobile"].includes(s)||n.height)&&delete t.scrolling;const c=document.createElement("iframe"),d=Object.assign({},t,n);Object.entries(d).forEach(([t,e])=>c.setAttribute(t,e)),Object.assign(c.style,{width:0,"min-width":"100%","min-height":"",opacity:0,display:"block"});const u=document.getElementById(o)||document.createElement("div");if(!u)return console.warn(`Provided container id "${o}" is not in the DOM`);u.appendChild(c),c.contentDocument.open(),c.contentDocument.write(h);const p=new Promise(t=>{c.contentDocument.addEventListener("DOMContentLoaded",t)});c.contentDocument.close(),await p,c.style.opacity="1",this.iframe=c}async boot(t={},e={}){return this.reset(),await this.configure(t,e),await this.loadAndStart(),this.startMessaging(),this}startMessaging(){this.dynamicallyChangeIframeDimensions(),this.dispatchParentBoundingBoxOnScroll()}dispatchParentBoundingBoxOnScroll(){this.iframe&&window.addEventListener("scroll",()=>{this.dispatchParentBoundingBox()})}dispatchParentBoundingBox(){const t=this.getBoundingBoxes();this.dispatch("bounds",{bounds:t})}getBoundingBoxes(){const t=this.iframe,e=this.headerHeight,i=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{visibleArea:{bottom:i.bottom,height:i.height,left:i.left,right:i.right,top:i.top,width:i.width,x:i.x,y:i.y,windowInnerHeight:window.innerHeight},sportIframe:{bottom:n.bottom,height:n.height,left:n.left,right:n.right,top:n.top,width:n.width,x:n.x,y:n.y},headerHeight:e}}dynamicallyChangeIframeDimensions(){const t=this.iframe,e=this.iframeConfig;t&&!e.height&&this.addEventListener("changeDimensions",e=>{this.setIframeHeight(t,e.data),this.dispatchParentBoundingBox()})}setIframeHeight(t,e){const i=e.height;t.height=i+"px"}changeColors(t){this.dispatchColorsChange.apply(this,arguments)}dispatchColorsChange(t){this.dispatch("changeColors",{colors:t})}async setup(t,e){return await this.configure(t,e),await this.load()}async configure(t,e,i={}){return this.appConfig=t,this.iframeConfig=i,this.setLoadingIndicator(),this.initBootConfig(e),await this.initAppBootableConfig(),this.finalizeAppConfig(),this.appBootableConfig}async loadAndStart(){return await this.load(),this.start()}async load(){return await this.Loader.load(this.appBootableConfig),this}start(){return this.Starter.start(this)}init(t){this.initDependencies(),this.initPartnerName(),this.initProps(t)}initPartnerName(){let t=window.location.origin.match("//(.*)")[1]||"",e=t.split(".")[0]||"";this.partnerName=e,this.partnerDomainName=t}initDependencies(){this.ConfigExtractor=new j.constructor,this.Loader=new _.constructor,this.Starter=new H.constructor,this.Utils=n}static get Utils(){return n}finalizeAppConfig(){let t=this.appConfig,e=this.ConfigExtractor.version,i=this.appBootableConfig.globalSettings;T(t,{version:e,globalSettings:i})}async initAppBootableConfig(){this.appBootableConfig=await this.ConfigExtractor.extract(this.appConfig,this.bootConfig)}initBootConfig(t={}){if(!t.name)throw new Error('Please provide application `name`, { name: "<APPLICATION NAME>" }');this.bootConfig=t}setLoadingIndicator(){let t=this.appConfig.containerId,e=this.Loader.loadingIndicatorSVG,i=U("#"+t);i&&(i.innerHTML=e)}objToWindowOptions(t){return JSON.stringify(t).replace(/["{}]/g,"").replace(/:/g,"=")}addEventListener(t,e){return this.Starter.addEventListener(t,e),this}removeEventListener(t,e){return this.Starter.removeEventListener(t,e),this}dispatch(t,e){return this.Starter.dispatchEvent(t,e),this}}e.default=$;console.time("Bootstrapper loading time"),document.addEventListener("DOMContentLoaded",(function(){console.timeEnd("Bootstrapper loading time")}))}]).default}));
