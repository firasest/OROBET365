typeof SportFrame=="undefined"&&(window.SportFrame=new function(){this.i=0;this.styleSetTimer=null;this.elem=null;this.betslip=null;this.commands={couponStakeCount:"couponStakeCount",customCssUrl:"customCssUrl",customCssVariables:"customCssVariables",deposit:"deposit",expressdayShow:"expressdayShow",fixHeight:"fixHeight",heightChanged:"heightChanged",loaded:"loaded",login:"login",moveBetslipBtn:"moveBetslipBtn",navigateToBetSlip:"navigateToBetSlip",navigateToBetHistory:"navigateToBetHistory",navigateToChampionship:"navigateToChampionship",navigateToEvent:"navigateToEvent",openPage:"openPage",registration:"registration",reload:"reload",scroll:"scroll",scrollTo:"scrollTo",scrollToTop:"scrollToTop",sportBalance:"sportBalance",statusError:"statusError",statusOk:"statusOk",withdraw:"withdraw"};this.setts={defaultPath:"SportsBook",terminalPath:"Terminal",scrollToTopInterval:null,fixedHeight:0};this.buildUrl=function(){var n=this.setts,t=n.server+n.defaultPath;if(typeof n.currentPage!="undefined"){if(n.currentPage.length<=2)switch(n.currentPage){case"0":n.currentPage="Home";break;case"1":n.currentPage="Upcoming";break;case"2":n.currentPage="EventView";break;case"3":n.currentPage="Results";break;case"7":n.currentPage="BetsHistory";break;case"8":n.currentPage="UpcomingDetails";break;case"10":n.currentPage="Calendar";break;case"11":n.currentPage="MultiView";break;case"12":n.currentPage="Overview";break;case"13":n.currentPage="Schedule";break;default:n.currentPage="Home"}t+="/"+n.currentPage}else t+="/Home";return typeof n.eventId!="undefined"&&(typeof n.stakeId!="undefined"?t=n.server+"Betting/AddStake/?eventId="+n.eventId+"&stakeId="+n.stakeId:t+="/"+n.eventId),typeof n.champId!="undefined"&&n.champId&&(t+="/"+n.champId),t+=t.indexOf("?")===-1?"?token="+n.token:"&token="+n.token,typeof n.sportsBookView!="undefined"&&(t+="&sportsBookView="+n.sportsBookView),typeof n.language!="undefined"&&(t+="&l="+n.language),typeof n.device!="undefined"&&(t+="&d="+n.device),typeof n.timeZone!="undefined"&&(t+="&tz="+n.timeZone),typeof n.oddsFormat!="undefined"&&(t+="&of="+n.oddsFormat),typeof n.customCssUrl!="undefined"&&(t+="&customCssUrl="+n.customCssUrl),n.clearSiteStyles&&(t+="&clearSiteStyles="+n.clearSiteStyles),t}.bind(this);this.fromStringToFunction=function(n){var t,i;if(n){for(n=n.split("."),t=window,i=0;i<n.length;i++)t=t[n[i]];if(typeof t=="function")return t}return function(){}}.bind(this);this.getBounds=function(){var t=document.documentElement.getBoundingClientRect(),n=this.elem.getBoundingClientRect();return{visibleArea:{top:t.top,height:window.innerHeight},sportIframe:{top:n.top,height:n.height}}}.bind(this);this.listenMessage=function(n){var s,h,c,l,f,e,o;switch(n.data.command){case this.commands.loaded:this.setCss();this.riseContentloaded();this.setFixedHeight();break;case this.commands.expressdayShow:s=document.getElementById("MultiBetofTheDayPanel");s&&(s.style.display=n.data.args?"":"none");break;case this.commands.couponStakeCount:this.betslip&&(h=this.betslip.querySelector("#footer_coupon_count"),h&&(h.innerHTML=n.data.args));break;case this.commands.moveBetslipBtn:this.betslip&&(this.betslip.innerHTML=n.data.args,c=this.betslip.querySelector("#footer_coupon_div"),c&&c.addEventListener("click",function(n){n.preventDefault();n.stopPropagation();this.sendMessage(this.commands.navigateToBetSlip,!0)}.bind(this)),l=this.betslip.querySelector("#footer_bet_history"),l&&l.addEventListener("click",function(n){n.preventDefault();n.stopPropagation();this.sendMessage(this.commands.navigateToBetHistory,!0)}.bind(this)));break;case this.commands.login:this.setts.login&&this.fromStringToFunction(this.setts.login)();break;case this.commands.registration:this.setts.registration&&this.fromStringToFunction(this.setts.registration)();break;case this.commands.deposit:this.setts.deposit&&this.fromStringToFunction(this.setts.deposit)();break;case this.commands.withdraw:this.setts.withdraw&&this.fromStringToFunction(this.setts.withdraw)();break;case this.commands.scrollTo:n.data.args!==undefined&&setTimeout(function(){window.scrollTo(0,n.data.args+100)},0);break;case this.commands.scrollToTop:this.setts.scrollToTopInterval&&clearInterval(this.setts.scrollToTopInterval);this.setts.scrollToTopInterval=setInterval(this.scrollToTop,5);break;case this.commands.reload:window.location.reload(!0);break;case this.commands.heightChanged:n.data.args&&this.setHeight(n.data.args);break;case this.commands.sportBalance:var t=JSON.parse(decodeURIComponent(n.data.args)),r=document.getElementById("SportBonusPanel"),u=document.getElementById("CashbackBalancePanel"),i=document.getElementById("TournamentBalancePanel");typeof t=="object"&&(r&&(f=r.querySelector("#SportBonusAmount"),f&&(parseFloat(t.BonusBalance)>=0?(r.style.display="",r.classList.remove("dis_none"),f.innerHTML=t.BonusBalance):(r.style.display="none",f.innerHTML=""))),u&&(e=u.querySelector("#CashbackBalanceAmount"),e&&(parseFloat(t.CashBackBalance)>=0?(u.style.display="",u.classList.remove("dis_none"),e.innerHTML=t.CashBackBalance):(u.style.display="none",e.innerHTML=""))),i&&(i.clickHandled||(i.clickHandled=!0,i.addEventListener("click",function(){this.openPage("TournamentsHistory")}.bind(this))),o=i.querySelector("#TournamentBalanceAmount"),o&&(parseFloat(t.TournamentBalance)>=0?(i.style.display="",i.classList.remove("dis_none"),o.innerHTML=t.TournamentBalance):(i.style.display="none",o.innerHTML=""))),this.setts.balanceChangeCallback&&this.setts.balanceChangeCallback({BonusBalance:t.BonusBalance,CashBackBalance:t.CashBackBalance,TournamentBalance:t.TournamentBalance}));break;case this.commands.statusOk:this.setts.healthCheckCallback&&this.fromStringToFunction(this.setts.healthCheckCallback)("status-ok");break;case this.commands.statusError:this.setts.healthCheckCallback&&this.fromStringToFunction(this.setts.healthCheckCallback)("status-error")}}.bind(this);this.riseContentloaded=function(){var n,i,t;if(typeof this.setts.onContentLoaded!="undefined"&&this.setts.onContentLoaded){for(n=window,i=this.setts.onContentLoaded.split("."),t=0;t<i.length;t++)n=n[i[t]];typeof n=="function"&&setTimeout(n,0)}}.bind(this);this.setFixedHeight=function(){this.setts.fixedHeight&&this.sendMessage(this.commands.fixHeight,this.setts.fixedHeight)}.bind(this);this.sendMessage=function(n,t){this.elem.contentWindow&&this.elem.contentWindow.postMessage({command:n,variables:t},"*")}.bind(this);this.scroll=function(){this.sendMessage(this.commands.scroll,this.getBounds())}.bind(this);this.scrollToTop=function(){var n=document.documentElement.getBoundingClientRect();n.top<0?window.scrollBy(0,-10):clearInterval(this.setts.scrollToTopInterval)}.bind(this);this.setCss=function(){this.setts.customCssUrl&&this.sendMessage(this.commands.customCssUrl,this.setts.customCssUrl)}.bind(this);this.setHeight=function(n){if(!this.setts.fixedHeight&&this.elem&&typeof n=="object"){var t=n.height;n.av===0||n.av===13||n.av===16||n.IsMobile?window.document.body.style.overflowY="":(window.document.body.style.overflowY!=="hidden"&&setTimeout(function(){clearInterval(this.setts.scrollToTopInterval);this.setts.scrollToTopInterval=setInterval(this.scrollToTop,5)}.bind(this),50),window.document.body.style.overflowY="hidden",t=window.innerHeight-this.elem.getBoundingClientRect().top);this.elem.height=t}}.bind(this);this.addEventListeners=function(){window.postMessage&&window.addEventListener("message",this.listenMessage,!1);window.scroll&&window.addEventListener("scroll",this.scroll,!1);window.onerror&&(window.onerror=function(){return!0})}.bind(this);this.frame=function(n){for(var u,i,r,f,e=["string","boolean","number"],t=0;t<n.length;t++){if(n[t][0]==="clearSiteStyles"){typeof n[t][1]=="boolean"&&(this.setts[n[t][0]]=n[t][1]);continue}if(n[t][0]==="balanceChangeCallback"){typeof n[t][1]=="function"&&(this.setts[n[t][0]]=n[t][1]);continue}if(n[t][0]==="eventId"||n[t][0]==="stakeId"){if(u=parseInt(n[t][1]),isNaN(u)||u<=0)continue;n[t][1]=u}n[t][0]==="unHideOverflow"&&(n[t][0]="fixedHeight");n[t][1]&&e.indexOf(typeof n[t][1])>-1&&(this.setts[n[t][0]]=n[t][1])}i=document.getElementById("sport_div_iframe");i===null&&(i=document.createElement("div"),document.body.appendChild(i));r=550;this.setts.fixedHeight=!!this.setts.fixedHeight&&this.setts.device!=="m";this.setts.fixedHeight?(f=i.getBoundingClientRect().top,r=this.setts.fixedHeight=window.innerHeight-f):this.setts.device==="m"&&(r=300);this.i++;this.elem=document.createElement("iframe");this.elem.setAttribute("frameborder","0");this.elem.setAttribute("allowfullscreen","");this.elem.setAttribute("allow","autoplay");this.elem.name="sport_iframe_"+this.i;this.elem.id="sport_iframe_"+this.i;this.elem.scrolling="no";this.elem.width=1;this.elem.height=r;this.elem.style.minWidth="100%";this.elem.style.minHeight=r+"px";this.elem.style.display="block";this.elem.src=this.buildUrl();i.appendChild(this.elem);this.setts.device==="m"&&(this.betslip=document.createElement("div"),this.betslip.id="betSlip",this.betslip.style.position="fixed",this.betslip.style.width="100%",this.betslip.style.textAlign="center",this.betslip.style.bottom="10px",this.betslip.style.zIndex="99",i.appendChild(this.betslip),function(n,t,i,r,u){r=n.createElement(t);u=n.getElementsByTagName("head")[0];r.rel="stylesheet";r.href=i;u.appendChild(r)}(document,"link",this.setts.server+"Css/CouponButton.css"));this.addEventListeners()}.bind(this);this.openPage=function(n){return this.sendMessage(this.commands.openPage,n)}.bind(this);this.setStyle=function(n){return this.styleSetTimer&&clearTimeout(this.styleSetTimer),this.styleSetTimer=setTimeout(this.sendMessage,50,this.commands.customCssVariables,n),!0}.bind(this)})